{% extends 'base.html.twig' %}

{% block body %}
    <script>
        let refreshInterval = null;

        function refreshImages() {
            document.querySelectorAll('.camera-preview-image').forEach(img => {
                // Append a timestamp to bypass caching
                img.src = img.src.split('?')[0] + '?t=' + Date.now();
            });
        }

        function startRefreshing() {
            if (!refreshInterval) {
                refreshInterval = setInterval(refreshImages, 5000);
            }
        }

        function stopRefreshing() {
            clearInterval(refreshInterval);
            refreshInterval = null;
        }

        document.addEventListener('visibilitychange', () => {
            document.hidden ? stopRefreshing() : startRefreshing();
        });

        // Start immediately if the tab is visible
        if (!document.hidden) {
            startRefreshing();
        }
    </script>
    <div class="contentBlock">
    <h2>Camera {{ camera.uid}} - {{ camera.title }}</h2>

        Titel: {{ camera.title }}
        Video folder: {{ camera.videoFolder }}
        cameraType: {{ camera.type.value }}
        Live URI: {{ camera.liveUri }}

    </div>
{% endblock %}
